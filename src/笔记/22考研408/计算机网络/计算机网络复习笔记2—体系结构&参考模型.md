# 体系结构&参考模型

## 分层结构、协议、接口、服务

### 分层的**基本原则**

1. 各层之间相互==独立==，每层只实现一种相对独立的功能。、
2. 每层之间==界面自然清晰==，易于理解，相互交流尽可能少。
3. 结构上可分割开。每层都采用==最合适的技术==来实现。
4. 保持==下层==对==上层==的独立性，**上层单向使用下层提供的服务**
5. 整个分层结构应该能促进标准化工作。

### 分层结构

<img src="C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210612213106110.png" alt="image-20210612213106110" style="zoom: 80%;" />

1. 实体:第n层中的活动元素称为==n层实体==。同一层的实体叫==对等实体==。
2. 协议:为进行网络中的==对等实体==数据交换而建立的规则、标准或约定称为网络协议。协议包括三个部分:==语法、语义和同步==【水平】
   1. 语法：规定了传输数据的格式
   2. 语义：规定了所要完成的功能
   3. 同步：规定执行操作的条件，如时序、顺序等
3. ==接口（访问服务点SAP)== :上层使用下层服务的入口。
4. 服务:下层为相邻上层提供的功能调用。【垂直】

![image-20210612213247969](C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210612213247969.png)

- SDU服务数据单元:为完成用户所要求的功能而应传送的数据。
- PCI协议控制信息:控制协议操作的信息。
- PDU协议数据单元:对等层次之间传送的数据单位。

### 概念总结

- 网络体系结构是从==功能==上描述计算机网络结构。
- 计算机网络体系结构简称网络体系结构是==分层结构==。
- 每层遵循某个/些==网络协议==以完成本层功能。
- **==计算机网络体系结构==**是计算机网络的==各层及其协议==的集合。
- 第n层在向n+1层提供服务时，此服务不仅包含第n层本身的功能，还包含由下层服务提供的功能。
- 仅仅在==**相邻层**间有接口==，且所提供服务的具体实现细节对上一层完全屏蔽。
- 体系结构是==**抽象**==的，而实现是指能运行的一些软件和硬件。

## OSI参考模型

<img src="C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210612215756067.png" alt="image-20210612215756067" style="zoom: 50%;" />

<img src="C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210612215902395.png" alt="image-20210612215902395" style="zoom:67%;" />

![image-20210612215950361](C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210612215950361.png)

### 通信过程

![image-20210612220045504](C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210612220045504.png)

### 应用层

所有能和用户交互产生网络流量的程序

接口：==用户界面==

典型应用层服务：

- 文件传输(FTP)
- 电子邮件(SMTP)
- 万维网(HTTP)

### 表示层

用于处理在两个通信系统中交换信息的表示方式（语法和语义）

> 功能一：数据格式变换 	`翻译官`
>
> 功能二：数据加密解密
>
> 功能三：数据压缩恢复

### 会话层

向表示层实体/用户进程提供==建立连接==并在连接上==有序==地==传输==数据。

这是会话，也是**==建立同步==**	(SYN)

> 功能一：建立、管理、终止会话
>
> 功能二：使用校验点可使会话在通信失效时从==**校验点/同步点**==继续恢复通信，实现数据同步。`适用于传输大文件`

### 传输层

负责主机中==两个进程==的通信，即==端到端==的通信。传输单位是==报文段或用户数据报==。

接口：==端口号==

> 功能一:可靠传输、不可靠传输
>
> 功能二:差错控制
>
> 功能三:流量控制
>
> 功能四:复用分用
>
> ==`复用:多个应用层进程可同时使用下面运输层的服务。`==
>
> ==`分用:运输层把收到的信息分别交付给上面应用层中相应的进程。`==

### 网络层

主要任务是把**==分组==**从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层传输单位是==数据报==。

接口：==IP地址==

> 功能一:路由选择 	`最佳路径`
>
> 功能二:流量控制
>
> 功能三:差错控制
>
> 功能四:拥塞控制	`若所有结点都来不及接受分组，而要丢弃大量分组的话，网络就处于拥塞状态。因此要采取一定措施缓解这种拥塞。`

### 数据链路层

主要任务是把网络层传下来的数据报==组装成帧==。数据链路层/链路层的传输单位是==**帧**==。

接口：==MAC地址==

> 功能一：物理寻址 	==MAC地址==
>
> 功能二:成帧（定义帧的开始和结束)
>
> 功能三:差错控制 	==帧错+位错==
>
> 功能四:流量控制
>
> 功能五:访问（接入)控制	 ==控制对信道的访问==

### 物理层

主要任务是在==物理媒体==上实现比特流的==透明传输==。物理层传输单位是**==比特==**。

接口：==网卡接口==

==透明传输:指不管所传数据是什么样的比特组合,都应当能够在链路上传送==

> 功能一:定义接口特性
>
> 功能二:定义传输模式 	==`单工、半双工、双工`==
>
> 功能三:定义传输速率
>
> 功能四:比特同步
>
> 功能五:比特编码

### 总结

| OSI七层    | 功能                                       | 协议                           |
| ---------- | ------------------------------------------ | ------------------------------ |
| 应用层     | 应用终端：FTP，WEB，QQ                     | FTP、HTTP、DNS、SMTP           |
| 表示层     | 加密解密，数据格式转换，数据压缩           |                                |
| 会话层     | 不同主机的进程的会话，建立同步             |                                |
| 传输层     | ==差错控制、拥塞控制、流量控制==           | TCP、UDP                       |
| 网络层     | 路由选择、==差错控制、拥塞控制、流量控制== | IP、ICMP、RIP、OSPF、BGP、IGMP |
| 数据链路层 | 寻址、成帧、==差错控制、流量控制==         | PPP、ARP、RARP、MTU            |
| 物理层     | 传输比特流、定义物理设备标准               | IEEE802.1A、IEEE802.2          |

## TCP/IP参考模型

<img src="C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210613095622536.png" alt="image-20210613095622536" style="zoom:67%;" />

### TCP/IP参考模型 vs OSI参考模型

#### 相同点：

1. 都分层
2. 基于独立的协议栈的概念
3. 可以实现异构网络互联

#### 不同点：

1. OSI定义三点：服务、协议、接口
2. OSI参考模型先于协议发明，不偏向特定协议
3. TCP/IP设计之初就考虑到异构网互联问题，将IP作为重要层次
4. <img src="C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210613100050718.png" alt="image-20210613100050718" style="zoom:67%;" />
   1. ==面向连接==分为三个阶段，第一是建立连接，在此阶段，发出一个建立连接的请求。只有在连接成功建立之后，才能开始数据传输，这是第二阶段接着，当数据传输完毕，必须释放连接。
   2. ==无连接==没有这么多阶段，它直接进行数据传输。
5. TCP/IP的网络层向上只提供简单灵活的、无连接的、尽最大努力交付的别据报服务

## 五层参考模型

<img src="C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210613100240031.png" alt="image-20210613100240031" style="zoom:67%;" />

![image-20210613100305065](C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210613100305065.png)

![image-20210613220310087](C:\Users\LIMBO\AppData\Roaming\Typora\typora-user-images\image-20210613220310087.png)
